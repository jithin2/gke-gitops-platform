# ------------------------------------------------------------------
# FRONTEND SERVICE
# Type: NodePort — exposes the app outside the cluster so you can
# access it from your browser via minikube's IP + port 30080
# ------------------------------------------------------------------
apiVersion: v1
kind: Service
metadata:
  name: frontend
  labels:
    app: frontend
spec:
  type: NodePort
  selector:
    app: frontend
  ports:
    - port: 80
      targetPort: {{ .Values.frontend.port }}
      nodePort: {{ .Values.frontend.nodePort }}
      name: http
---
# ------------------------------------------------------------------
# ORDER SERVICE
# Type: ClusterIP (default) — only reachable INSIDE the cluster
# Why? Backend services should never be directly exposed to users
# ------------------------------------------------------------------
apiVersion: v1
kind: Service
metadata:
  name: order-service
  labels:
    app: order-service
spec:
  type: ClusterIP
  selector:
    app: order-service
  ports:
    - port: {{ .Values.orderService.port }}
      targetPort: {{ .Values.orderService.port }}
      name: http
---
# ------------------------------------------------------------------
# PRODUCT SERVICE
# Type: ClusterIP — same reasoning as order-service
# ------------------------------------------------------------------
apiVersion: v1
kind: Service
metadata:
  name: product-service
  labels:
    app: product-service
spec:
  type: ClusterIP
  selector:
    app: product-service
  ports:
    - port: {{ .Values.productService.port }}
      targetPort: {{ .Values.productService.port }}
      name: http
